{{ define "scriptImports" }}
{{ $modalJs := resources.Get "js/modalJs.js" }}
<script src="{{ ($modalJs).RelPermalink }}"></script>
{{ end }}

{{ define "additionalStyleImports" }}
{{ $css := resources.Get "css/aboutus.css" }}
<link rel="stylesheet" href="{{ ($css).RelPermalink }}">
{{ end }}

{{ define "main" }}
<section class="section-row" id="bg">

  <p class="page-description">Za organizacją każdej naszej realizacji stoją ludzie - My. :) Poznaj nas bliżej!</p>

  <div class="flex-container">

    {{ $.Scratch.Set "index" 0 }}
    {{ range $.Site.Data.about_us.members }}

      {{ $modalId := print "modal" ($.Scratch.Get "index") }}
      {{ $index := ($.Scratch.Get "index") }}

      <div href="#" onclick="toggleDialog('show', '{{ $index }}');" class="member-tile">

        {{ $image := resources.Get .photo }}
        {{ with $image }}
        <img src="{{ $image.RelPermalink }}" width="295" height="295">
        {{ end }}

        <h3 class="member-tile-title">{{ .name }}</h3>
        <h4 class="member-tile-subtitle">{{ .function }}</h4>
      </div>

      {{ $.Scratch.Set "index" (add ($.Scratch.Get "index") 1) }}
    {{ end }}

  </div>
</section>

<div class="member-details-modal-background" id="memberDetailsModalBackground">
  <a href="#" onclick="modalNavigationRight();" class="modal-navigation modal-navigation-right"></a>
  {{ $.Scratch.Set "index" 0 }}
  {{ range $.Site.Data.about_us.members }}

    {{ $modalId := print "modal" ($.Scratch.Get "index") }}
    {{ $index := ($.Scratch.Get "index") }}

    <!--TODO: remove bg, move modals as siblings of the entire content -->
    <div tabindex="-1" role="dialog" aria-modal="true" aria-labelledby="memberDetailsModal{{ $.Scratch.Get " index" }}"
      id="{{ $modalId }}" class="member-details-modal-content">
      <div class="member-details-modal-content-container">

        <div class="member-details-modal-content-image-container">
          {{ $image := resources.Get .photo }}
          {{ with $image }}
          <img src="{{ $image.RelPermalink }}" width="295" height="295">
          {{ end }}
        </div>

        <div>
          <h3 class="member-tile-title">{{ .name }}</h3>
          <h4 class="member-tile-subtitle">{{ .function }}</h4>

          <p>{{ .description | markdownify }}</p>
        </div>

        <!--<button onclick="toggleDialog('hide', '{{ $index }}');" class="close-button">close</button>-->
      </div>
    </div>
    {{ $.Scratch.Set "index" (add ($.Scratch.Get "index") 1) }}
  {{ end }}
  <a href="#" onclick="modalNavigationLeft()" class="modal-navigation modal-navigation-left"></a>
</div>

{{ end }}